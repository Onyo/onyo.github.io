"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[686],{3905:function(t,e,n){n.d(e,{Zo:function(){return u},kt:function(){return c}});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var d=a.createContext({}),p=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):l(l({},e),t)),n},u=function(t){var e=p(t.components);return a.createElement(d.Provider,{value:e},t.children)},s={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,o=t.originalType,d=t.parentName,u=i(t,["components","mdxType","originalType","parentName"]),m=p(n),c=r,k=m["".concat(d,".").concat(c)]||m[c]||s[c]||o;return n?a.createElement(k,l(l({ref:e},u),{},{components:n})):a.createElement(k,l({ref:e},u))}));function c(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var d in e)hasOwnProperty.call(e,d)&&(i[d]=e[d]);i.originalType=t,i.mdxType="string"==typeof t?t:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5385:function(t,e,n){n.r(e),n.d(e,{frontMatter:function(){return i},contentTitle:function(){return d},metadata:function(){return p},toc:function(){return u},default:function(){return m}});var a=n(2122),r=n(9756),o=(n(7294),n(3905)),l=["components"],i={id:"manage_orders",title:"Fluxo de gerenciamento de pedidos",hide_title:!0},d=void 0,p={unversionedId:"checkout/orders/manage_orders",id:"checkout/orders/manage_orders",isDocsHomePage:!1,title:"Fluxo de gerenciamento de pedidos",description:"Fluxo de gerenciamento de pedidos",source:"@site/docs/checkout/orders/manage_orders.md",sourceDirName:"checkout/orders",slug:"/checkout/orders/manage_orders",permalink:"/checkout/orders/manage_orders",editUrl:"https://onyo.github.io/docs/checkout/orders/manage_orders.md",version:"current",frontMatter:{id:"manage_orders",title:"Fluxo de gerenciamento de pedidos",hide_title:!0},sidebar:"docs",previous:{title:"Autentica\xe7\xe3o para transa\xe7\xf5es de pedidos",permalink:"/checkout/orders/authentication_orders"}},u=[{value:"Fluxo de gerenciamento de pedidos",id:"fluxo-de-gerenciamento-de-pedidos",children:[{value:"Como funciona?",id:"como-funciona",children:[]},{value:"Listagem de pedidos (order-list)",id:"listagem-de-pedidos-order-list",children:[]},{value:"Tipos de pedidos",id:"tipos-de-pedidos",children:[]},{value:"Detalhe de pedido (order-detail)",id:"detalhe-de-pedido-order-detail",children:[]},{value:"Atualiza\xe7\xe3o de pedido (order-patch)",id:"atualiza\xe7\xe3o-de-pedido-order-patch",children:[]}]}],s={toc:u};function m(t){var e=t.components,n=(0,r.Z)(t,l);return(0,o.kt)("wrapper",(0,a.Z)({},s,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"fluxo-de-gerenciamento-de-pedidos"},"Fluxo de gerenciamento de pedidos"),(0,o.kt)("h3",{id:"como-funciona"},"Como funciona?"),(0,o.kt)("p",null,"Todas as requisi\xe7\xf5es abaixo requerem autentica\xe7\xe3o. A autentica\xe7\xe3o deve ser fornecida atrav\xe9s do envio do token da brand/company atrav\xe9s do header HTTP Authorization."),(0,o.kt)("p",null,"O token da brand/company pode ser fornecido diretamente pela Pede Pronto, usando o modelo JWT de autentica\xe7\xe3o."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Resumo")),(0,o.kt)("p",null,"O Pede Pronto disponibiliza o e-mail na listagem de pedidos, o PDV interpreta os dados. Se tudo estiver correto,  prosegue alterando o status para o ID 4 (pos-accepted) ou ID 5 (pos-denied)."),(0,o.kt)("h3",{id:"listagem-de-pedidos-order-list"},"Listagem de pedidos (order-list)"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"GET /v1/{:PARTNER_SLUG}/order")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"curl --request GET \\\n  --url https://pos.staging.onyo.com/v1/{:PARTNER_SLUG}/orders \\\n  --header 'Authorization: Bearer\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6Ikpva\nG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_ad\nQssw5c' \\\n  --header 'Content-Type: application/json'\n")),(0,o.kt)("p",null,"Essa chamada retorna uma lista de pedidos da loja autenticada na requisi\xe7\xe3o. Por padr\xe3o essa chamada executa um filtro pelos pedidos nos status 2 e 3 (payment-authorized e pos-received) que s\xe3o os pedidos que o PDV precisa aprovar ou reprovar. Caso algum filtro de status seja feito o filtro padr\xe3o ser\xe1 sobrescrito."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Campo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Tipo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Requerido")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Exemplo")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"status"),(0,o.kt)("td",{parentName:"tr",align:null},"String ou lista"),(0,o.kt)("td",{parentName:"tr",align:null},"Sim"),(0,o.kt)("td",{parentName:"tr",align:null},"Status ou lista de status dos pedidos. Por padr\xe3o os pedidos s\xe3o filtrados pelos status 2 e 3 caso nenhum filtro de status seja informado. Ex: status=3 ou status=3,4,5")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"since"),(0,o.kt)("td",{parentName:"tr",align:null},"String"),(0,o.kt)("td",{parentName:"tr",align:null},"N\xe3o"),(0,o.kt)("td",{parentName:"tr",align:null},"ISO date em UTC. Ex: since=2018-04-01T00:00:00")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"until"),(0,o.kt)("td",{parentName:"tr",align:null},"String"),(0,o.kt)("td",{parentName:"tr",align:null},"N\xe3o"),(0,o.kt)("td",{parentName:"tr",align:null},"ISO date em UTC. Ex: until=2016-04-01T00:00:00")))),(0,o.kt)("p",null,"Exemplo de URL (filtrando por pedidos aprovados e negados pelo PDV que tenham sido criados desde 01/09/2018 00:00:00 UTC):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/v1/{:PARTNER_SLUG}/order?status=4,5&since=2018-09-01T00:00:00\n")),(0,o.kt)("h3",{id:"tipos-de-pedidos"},"Tipos de pedidos"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"ID")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"C\xf3digo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Descri\xe7\xe3o")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"1"),(0,o.kt)("td",{parentName:"tr",align:null},"counter"),(0,o.kt)("td",{parentName:"tr",align:null},"Um pedido a ser recebido no balc\xe3o para ser consumido no restaurante ou pra\xe7a de alimenta\xe7\xe3o")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"2"),(0,o.kt)("td",{parentName:"tr",align:null},"to-go"),(0,o.kt)("td",{parentName:"tr",align:null},"Uma encomenda a ser retirada embalada para ser consumida em outro local")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"3"),(0,o.kt)("td",{parentName:"tr",align:null},"curbside"),(0,o.kt)("td",{parentName:"tr",align:null},"Um pedido a ser retirado no Drive Thru")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"4"),(0,o.kt)("td",{parentName:"tr",align:null},"table"),(0,o.kt)("td",{parentName:"tr",align:null},"Um pedido para ser servido na mesa informada")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"5"),(0,o.kt)("td",{parentName:"tr",align:null},"delivery"),(0,o.kt)("td",{parentName:"tr",align:null},"Um pedido a ser entregue no endere\xe7o informado")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"6"),(0,o.kt)("td",{parentName:"tr",align:null},"card"),(0,o.kt)("td",{parentName:"tr",align:null},"Um pedido para ser registrado em um cart\xe3o de consumo")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"7"),(0,o.kt)("td",{parentName:"tr",align:null},"payment"),(0,o.kt)("td",{parentName:"tr",align:null},"Um pagamento por itens encomendados pessoalmente")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"8"),(0,o.kt)("td",{parentName:"tr",align:null},"coupon"),(0,o.kt)("td",{parentName:"tr",align:null},"Um pedido que ser\xe1 resgatado na loja, mas que n\xe3o deve ser preparado at\xe9 que o cliente a resgate pessoalmente")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"9"),(0,o.kt)("td",{parentName:"tr",align:null},"room-service"),(0,o.kt)("td",{parentName:"tr",align:null},"Um pedido a ser entregue no local informado considerando algumas op\xe7\xf5es restritivas, como por exemplo um pr\xe9dio comercial")))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"}," Status dispon\xedveis para altera\xe7\xe3o ")),(0,o.kt)("p",null,"Um status n\xe3o pode retroceder, a n\xe3o ser para 0 (Cancelled) ou 5 (POS_DENIED)."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Exemplo correto:")," ",(0,o.kt)("inlineCode",{parentName:"p"},"1 (backend-received) > 2 (payment-authorized) > 3 (pos-received) > 4 (pos-accepted) > 6 (read) > 7 (dispatched) ")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Exemplo inv\xe1lido:")," ",(0,o.kt)("inlineCode",{parentName:"p"},"1 (backend-received) > 2 (payment-authorized) > 3 (pos-received) > 4 (pos-accepted) > 3 (pos-received)")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"ID")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"C\xf3digo (Inteiro)")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Descri\xe7\xe3o")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"0"),(0,o.kt)("td",{parentName:"tr",align:null},"canceled"),(0,o.kt)("td",{parentName:"tr",align:null},"Cancelado devido ao pagamento ter sido negado ou cancelado manualmente pela Pede Pronto")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"1"),(0,o.kt)("td",{parentName:"tr",align:null},"backend-received"),(0,o.kt)("td",{parentName:"tr",align:null},"Aguardando processamento do pagamento")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"2"),(0,o.kt)("td",{parentName:"tr",align:null},"payment-authorized"),(0,o.kt)("td",{parentName:"tr",align:null},"Pagamento aprovado, aguardando processamento pelo PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"3"),(0,o.kt)("td",{parentName:"tr",align:null},"pos-received"),(0,o.kt)("td",{parentName:"tr",align:null},"Recebido pelo PDV, aguardando confirma\xe7\xe3o")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"4"),(0,o.kt)("td",{parentName:"tr",align:null},"pos-accepted"),(0,o.kt)("td",{parentName:"tr",align:null},"Aceito pelo PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"5"),(0,o.kt)("td",{parentName:"tr",align:null},"pos-denied"),(0,o.kt)("td",{parentName:"tr",align:null},"Negado pelo PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"6"),(0,o.kt)("td",{parentName:"tr",align:null},"ready"),(0,o.kt)("td",{parentName:"tr",align:null},"Pedido pronto para ser recebido pelo consumidor (informado pela loja)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"7"),(0,o.kt)("td",{parentName:"tr",align:null},"dispatched"),(0,o.kt)("td",{parentName:"tr",align:null},"Saiu para entrega (delivery)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"8"),(0,o.kt)("td",{parentName:"tr",align:null},"delivered"),(0,o.kt)("td",{parentName:"tr",align:null},"Entregue para o consumidor")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"9"),(0,o.kt)("td",{parentName:"tr",align:null},"received"),(0,o.kt)("td",{parentName:"tr",align:null},"Recebido pelo consumidor (informado pelo pr\xf3prio consumidor)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"13"),(0,o.kt)("td",{parentName:"tr",align:null},"preparing"),(0,o.kt)("td",{parentName:"tr",align:null},"Pedido sendo preparado pela loja")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"15"),(0,o.kt)("td",{parentName:"tr",align:null},"product-unavailable"),(0,o.kt)("td",{parentName:"tr",align:null},"Preparo do pedido pausado devido a indisponibilidade de algum produto. Aguardando decis\xe3o do consumidor")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"16"),(0,o.kt)("td",{parentName:"tr",align:null},"customer-action-needed"),(0,o.kt)("td",{parentName:"tr",align:null},"Preparo do pedido pausado devido a uma d\xfavida do Staff da loja. Aguardando informa\xe7\xe3o do consumidor")))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Status n\xe3o aplic\xe1veis para integra\xe7\xf5es deste manual")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"ID")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"C\xf3digo (Inteiro)")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Descri\xe7\xe3o")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"10"),(0,o.kt)("td",{parentName:"tr",align:null},"consumed"),(0,o.kt)("td",{parentName:"tr",align:null},"Consumido pelo cliente")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"11"),(0,o.kt)("td",{parentName:"tr",align:null},"pos-imported"),(0,o.kt)("td",{parentName:"tr",align:null},"Importado pelo sistema de PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"12"),(0,o.kt)("td",{parentName:"tr",align:null},"pos-import-error"),(0,o.kt)("td",{parentName:"tr",align:null},"N\xe3o importado pelo sistema de PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"14"),(0,o.kt)("td",{parentName:"tr",align:null},"pos-analysing"),(0,o.kt)("td",{parentName:"tr",align:null},"Em an\xe1lise pelo sistema de PDV")))),(0,o.kt)("h4",{id:"campos-extras"},"Campos Extras:"),(0,o.kt)("p",null,"Os campos extras s\xe3o retornados nessa chamada caso o pedido tenha informa\xe7\xf5es adicionais como taxa de entrega ou descontos."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Campo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Descri\xe7\xe3o")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"optional"),(0,o.kt)("td",{parentName:"tr",align:null},"Campo booleano (true ou false)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"value"),(0,o.kt)("td",{parentName:"tr",align:null},"Valor em R$ do extra/desconto")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"key"),(0,o.kt)("td",{parentName:"tr",align:null},"Campo descritivo do valor extra/desconto")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"label"),(0,o.kt)("td",{parentName:"tr",align:null},"Nome do valor extra/desconto")))),(0,o.kt)("p",null,"Exemplo de resposta contendo um pedido:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n "pagination": {\n   "next": null,\n   "total": 1,\n   "page": 1,\n   "previous": null\n },\n "data": [\n   {\n     "pos_reference": "",\n     "customer_document": "53189076871",\n     "service_charge_value": null,\n     "id": 1047534,\n     "display_code": null,\n     "order_type": 5,\n     "nested_items": [\n       {\n         "base_unit_pos_price": null,\n         "pos_reference": "",\n         "pos_name": "",\n         "description": "",\n         "dragged_by": null,\n         "addition": 0.0,\n         "redeem_id": null,\n         "unit_price": "35.00",\n         "base_unit_price": null,\n         "product": {\n           "id": 52012,\n           "name": "Meio a Meio"\n         },\n         "unit_pos_price": null,\n         "order_id": 1047534,\n         "order_position": 1,\n         "discount": 0.0,\n         "prepare_rightaway": true,\n         "unit_points": 0,\n         "product_type": 2,\n         "items": [\n           {\n             "base_unit_pos_price": null,\n             "pos_reference": "",\n             "pos_name": "",\n             "description": "",\n             "dragged_by": null,\n             "addition": 0.0,\n             "redeem_id": null,\n             "unit_price": null,\n             "base_unit_price": null,\n             "product": {\n               "id": 52013,\n               "name": "Escolha os sabores"\n             },\n             "unit_pos_price": null,\n             "order_id": 1047534,\n             "order_position": 2,\n             "discount": 0.0,\n             "prepare_rightaway": true,\n             "unit_points": 0,\n             "product_type": 1,\n             "items": [\n               {\n                 "base_unit_pos_price": null,\n                 "pos_reference": "",\n                 "pos_name": null,\n                 "description": "None",\n                 "dragged_by": null,\n                 "addition": 0.0,\n                 "redeem_id": null,\n                 "unit_price": null,\n                 "base_unit_price": null,\n                 "product": {\n                   "id": 52014,\n                   "name": "Marguerita"\n                 },\n                 "unit_pos_price": null,\n                 "order_id": 1047534,\n                 "order_position": 3,\n                 "discount": 0.0,\n                 "prepare_rightaway": true,\n                 "unit_points": 0,\n                 "product_type": 0,\n                 "items": [],\n                 "partition": null,\n                 "is_note": false,\n                 "pos_parent_position": null,\n                 "parent_order_position": 2,\n                 "quantity": "1.000"\n               },\n               {\n                 "base_unit_pos_price": null,\n                 "pos_reference": "",\n                 "pos_name": null,\n                 "description": "None",\n                 "dragged_by": null,\n                 "addition": 0.0,\n                 "redeem_id": null,\n                 "unit_price": null,\n                 "base_unit_price": null,\n                 "product": {\n                   "id": 52017,\n                   "name": "Presunto Parma"\n                 },\n                 "unit_pos_price": null,\n                 "order_id": 1047534,\n                 "order_position": 4,\n                 "discount": 0.0,\n                 "prepare_rightaway": true,\n                 "unit_points": 0,\n                 "product_type": 0,\n                 "items": [],\n                 "partition": null,\n                 "is_note": false,\n                 "pos_parent_position": null,\n                 "parent_order_position": 2,\n                 "quantity": "1.000"\n               }\n             ],\n             "partition": null,\n             "is_note": false,\n             "pos_parent_position": null,\n             "parent_order_position": 1,\n             "quantity": "1.000"\n           }\n         ],\n         "partition": null,\n         "is_note": false,\n         "pos_parent_position": null,\n         "parent_order_position": null,\n         "quantity": "1.000"\n       },\n       {\n         "base_unit_pos_price": null,\n         "pos_reference": "",\n         "pos_name": null,\n         "description": "",\n         "dragged_by": null,\n         "addition": 0.0,\n         "redeem_id": null,\n         "unit_price": "14.00",\n         "base_unit_price": null,\n         "product": {\n           "id": 71662,\n           "name": "Kombucha Maracuj\xe1 Garrafa Booz 320ml"\n         },\n         "unit_pos_price": null,\n         "order_id": 1047534,\n         "order_position": 5,\n         "discount": 0.0,\n         "prepare_rightaway": true,\n         "unit_points": 0,\n         "product_type": 2,\n         "items": [],\n         "partition": null,\n         "is_note": false,\n         "pos_parent_position": null,\n         "parent_order_position": null,\n         "quantity": "1.000"\n       },\n       {\n         "base_unit_pos_price": null,\n         "pos_reference": "",\n         "pos_name": null,\n         "description": "",\n         "dragged_by": null,\n         "addition": 0.0,\n         "redeem_id": null,\n         "unit_price": null,\n         "base_unit_price": null,\n         "product": {\n           "id": 71669,\n           "name": "Embalagem"\n         },\n         "unit_pos_price": null,\n         "order_id": 1047534,\n         "order_position": 6,\n         "discount": 0.0,\n         "prepare_rightaway": true,\n         "unit_points": 0,\n         "product_type": 2,\n         "items": [],\n         "partition": null,\n         "is_note": false,\n         "pos_parent_position": null,\n         "parent_order_position": null,\n         "quantity": "2.000"\n       }\n     ],\n     "preparation_time_minimum": 64,\n     "pos_import_status": null,\n     "payable_value": "49.65",\n     "status": 3,\n     "creation_datetime": "2020-06-04T00:23:34.162787Z",\n     "table_reference": "",\n     "total_value": "57.00",\n     "redeem": false,\n     "printed": false,\n     "address": {\n       "city": "S\xe3o Paulo",\n       "geoLat": "-23.5682759000",\n       "country": "Brazil",\n       "complement": "Bairro: Para\xedso | Complemento: 2o andar",\n       "number": "70",\n       "zipCode": "04003-000",\n       "state": "SP",\n       "street": "Rua Coronel Oscar Porto",\n       "geoLon": "-46.6491211000"\n     },\n     "customer": {\n       "telephone": "11971652467",\n       "email": "felipe@onyo.com",\n       "document": "53189076871",\n       "id": 32434,\n       "name": "Felipe Armoni Teste"\n     },\n     "preparation_time_maximum": 74,\n     "items": [\n       {\n         "base_unit_pos_price": null,\n         "pos_reference": "",\n         "pos_name": null,\n         "description": "None",\n         "dragged_by": null,\n         "addition": 0.0,\n         "redeem_id": null,\n         "unit_price": null,\n         "base_unit_price": null,\n         "product": {\n           "id": 52014,\n           "name": "Marguerita"\n         },\n         "unit_pos_price": null,\n         "order_id": 1047534,\n         "order_position": 3,\n         "discount": 0.0,\n         "prepare_rightaway": true,\n         "unit_points": 0,\n         "product_type": 0,\n         "partition": null,\n         "is_note": false,\n         "pos_parent_position": null,\n         "parent_order_position": 2,\n         "quantity": "1.000"\n       },\n       {\n         "base_unit_pos_price": null,\n         "pos_reference": "",\n         "pos_name": "",\n         "description": "",\n         "dragged_by": null,\n         "addition": 0.0,\n         "redeem_id": null,\n         "unit_price": null,\n         "base_unit_price": null,\n         "product": {\n           "id": 52013,\n           "name": "Escolha os sabores"\n         },\n         "unit_pos_price": null,\n         "order_id": 1047534,\n         "order_position": 2,\n         "discount": 0.0,\n         "prepare_rightaway": true,\n         "unit_points": 0,\n         "product_type": 1,\n         "partition": null,\n         "is_note": false,\n         "pos_parent_position": null,\n         "parent_order_position": 1,\n         "quantity": "1.000"\n       },\n       {\n         "base_unit_pos_price": null,\n         "pos_reference": "",\n         "pos_name": "",\n         "description": "",\n         "dragged_by": null,\n         "addition": 0.0,\n         "redeem_id": null,\n         "unit_price": "35.00",\n         "base_unit_price": null,\n         "product": {\n           "id": 52012,\n           "name": "Meio a Meio"\n         },\n         "unit_pos_price": null,\n         "order_id": 1047534,\n         "order_position": 1,\n         "discount": 0.0,\n         "prepare_rightaway": true,\n         "unit_points": 0,\n         "product_type": 2,\n         "partition": null,\n         "is_note": false,\n         "pos_parent_position": null,\n         "parent_order_position": null,\n         "quantity": "1.000"\n       },\n       {\n         "base_unit_pos_price": null,\n         "pos_reference": "",\n         "pos_name": null,\n         "description": "None",\n         "dragged_by": null,\n         "addition": 0.0,\n         "redeem_id": null,\n         "unit_price": null,\n         "base_unit_price": null,\n         "product": {\n           "id": 52017,\n           "name": "Presunto Parma"\n         },\n         "unit_pos_price": null,\n         "order_id": 1047534,\n         "order_position": 4,\n         "discount": 0.0,\n         "prepare_rightaway": true,\n         "unit_points": 0,\n         "product_type": 0,\n         "partition": null,\n         "is_note": false,\n         "pos_parent_position": null,\n         "parent_order_position": 2,\n         "quantity": "1.000"\n       },\n       {\n         "base_unit_pos_price": null,\n         "pos_reference": "",\n         "pos_name": null,\n         "description": "",\n         "dragged_by": null,\n         "addition": 0.0,\n         "redeem_id": null,\n         "unit_price": null,\n         "base_unit_price": null,\n         "product": {\n           "id": 71669,\n           "name": "Embalagem"\n         },\n         "unit_pos_price": null,\n         "order_id": 1047534,\n         "order_position": 6,\n         "discount": 0.0,\n         "prepare_rightaway": true,\n         "unit_points": 0,\n         "product_type": 2,\n         "partition": null,\n         "is_note": false,\n         "pos_parent_position": null,\n         "parent_order_position": null,\n         "quantity": "2.000"\n       },\n       {\n         "base_unit_pos_price": null,\n         "pos_reference": "",\n         "pos_name": null,\n         "description": "",\n         "dragged_by": null,\n         "addition": 0.0,\n         "redeem_id": null,\n         "unit_price": "14.00",\n         "base_unit_price": null,\n         "product": {\n           "id": 71662,\n           "name": "Kombucha Maracuj\xe1 Garrafa Booz 320ml"\n         },\n         "unit_pos_price": null,\n         "order_id": 1047534,\n         "order_position": 5,\n         "discount": 0.0,\n         "prepare_rightaway": true,\n         "unit_points": 0,\n         "product_type": 2,\n         "partition": null,\n         "is_note": false,\n         "pos_parent_position": null,\n         "parent_order_position": null,\n         "quantity": "1.000"\n       }\n     ],\n     "extras": [\n       {\n         "optional": false,\n         "value": "-7.35",\n         "key": "discount",\n         "label": "15OFF_LABARBARA_CHEFSCLUB"\n       },\n       {\n         "optional": false,\n         "value": "8.00",\n         "key": "additional",\n         "label": "Entrega"\n       }\n     ],\n     "payments": [\n       {\n         "status": "canceled",\n         "gateway_code": "vtex",\n         "is_onyo_affiliation": false,\n         "payment_method": "credit",\n         "transaction_id": "BB2AF9F03FA744A79EF62858222C4B25",\n         "value": "49.65",\n         "numerical_id": 1054575,\n         "transaction_date": "2020-06-04 00:23:34",\n         "acquirer": {\n           "pos_reference": "",\n           "id": 1,\n           "name": "Cielo"\n         },\n         "acquirer_return": {\n           "Tid": "91744583",\n           "Message": null,\n           "ReturnCode": null,\n           "authId": "744583"\n         },\n         "payment_method_pos_reference": "",\n         "transaction_code": "TESTPAY1054575",\n         "card": {\n           "masked_number": "4444331111",\n           "printed_name": "Felipe",\n           "card_brand": {\n             "pos_reference": "",\n             "code": "visa",\n             "id": 8,\n             "name": "Visa"\n           }\n         }\n       }\n     ],\n     "error": null,\n     "discount_value": "7.35",\n     "sequence_number": null\n   }\n ]\n}\n\n')),(0,o.kt)("h3",{id:"detalhe-de-pedido-order-detail"},"Detalhe de pedido (order-detail)"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"GET /v1/{:PARTNER_SLUG}/order/{:order_id}")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"curl --request GET \\\n  --url https://pos.staging.onyo.com/v1/{:PARTNER_SLUG}/orders/1234 \\\n  --header 'Authorization: Bearer\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6Ikpva\nG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_ad\nQssw5c' \\\n  --header 'Content-Type: application/json'\n")),(0,o.kt)("p",null,"Essa chamada retorna o JSON do pedido informado na URL. A resposta dessa chamada tem o mesmo conte\xfado da lista de itens da chamada de listagem de pedidos, por\xe9m apenas com o objeto do pedido solicitado na URL. "),(0,o.kt)("h3",{id:"atualiza\xe7\xe3o-de-pedido-order-patch"},"Atualiza\xe7\xe3o de pedido (order-patch)"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"PATCH /v1/{:PARTNER_SLUG}/order/{:order_id}")),(0,o.kt)("p",null,"Essa chamada permite a atualiza\xe7\xe3o do status de um pedido para 4 (aceito / POS_ACCEPTED) ou 5 (erro / POS_DENIED).\nCaso haja algum erro com o pedido \xe9 importante que o campo erro seja enviado junto com o status 5."),(0,o.kt)("p",null,"Exemplo de payload de aprova\xe7\xe3o de pedido:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n    "status": 4\n}\n')),(0,o.kt)("p",null,"Exemplo de payload de reprova\xe7\xe3o de pedido:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},' {\n    "status": 5,\n    "error": {\n        "type": "onyo.order.invalid-data",\n        "message":"C\xf3digo de Produto Inv\xe1lido",\n        "productErrors": [\n            {\n                "id": "http://api.staging.onyo.com/v1/mobile/product/500",\n                "error": {\n                    "type": "onyo.order.item-inconsistent"\n                }\n            }\n        ]\n    }\n}\n')),(0,o.kt)("h4",{id:"campos-dispon\xedveis-para-atualiza\xe7\xe3o"},"Campos dispon\xedveis para atualiza\xe7\xe3o"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Campo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Tipo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Obrigat\xf3rio")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Coment\xe1rio")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"status"),(0,o.kt)("td",{parentName:"tr",align:null},"Inteiro"),(0,o.kt)("td",{parentName:"tr",align:null},"N\xe3o"),(0,o.kt)("td",{parentName:"tr",align:null},"Status que o PDV deseja atualizar o pedido. Ex: 4 (pos-accepted), 5 (pos-denied) ou 6 (ready).")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"error"),(0,o.kt)("td",{parentName:"tr",align:null},"ErrorObject"),(0,o.kt)("td",{parentName:"tr",align:null},"Sim"),(0,o.kt)("td",{parentName:"tr",align:null},"Detalhes do motivo de nega\xe7\xe3o do pedido pelo PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"type"),(0,o.kt)("td",{parentName:"tr",align:null},"String"),(0,o.kt)("td",{parentName:"tr",align:null},"Sim"),(0,o.kt)("td",{parentName:"tr",align:null},"C\xf3digo de erro. Ver ",(0,o.kt)("a",{parentName:"td",href:"http://documentacao.pedepronto.com.br/checkout/orders/manage_orders#c%C3%B3digos-de-erro-do-pedido"},"C\xf3digos de erro de pedido"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"detail"),(0,o.kt)("td",{parentName:"tr",align:null},"Object"),(0,o.kt)("td",{parentName:"tr",align:null},"N\xe3o"),(0,o.kt)("td",{parentName:"tr",align:null},"Detalhes do erro, para fins de debug, n\xe3o precisa seguir um formato espec\xedfico.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"message"),(0,o.kt)("td",{parentName:"tr",align:null},"String"),(0,o.kt)("td",{parentName:"tr",align:null},"N\xe3o"),(0,o.kt)("td",{parentName:"tr",align:null},"Mensagem de erro")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"productErrors"),(0,o.kt)("td",{parentName:"tr",align:null},"list of ProductErrorObject"),(0,o.kt)("td",{parentName:"tr",align:null},"N\xe3o"),(0,o.kt)("td",{parentName:"tr",align:null},"Lista de erros de produtos, caso tenha ocorrido erro especificamente em algum produto.")))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Descri\xe7\xe3o de erro do produto")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Campo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Tipo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Obrigat\xf3rio")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Coment\xe1rio")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"id"),(0,o.kt)("td",{parentName:"tr",align:null},"URL"),(0,o.kt)("td",{parentName:"tr",align:null},"Sim"),(0,o.kt)("td",{parentName:"tr",align:null},"Url do produto que cont\xe9m erro.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"error"),(0,o.kt)("td",{parentName:"tr",align:null},"ErrorObject"),(0,o.kt)("td",{parentName:"tr",align:null},"Sim"),(0,o.kt)("td",{parentName:"tr",align:null},"Objeto de erro.")))),(0,o.kt)("h4",{id:"c\xf3digos-de-erro-do-pedido"},"C\xf3digos de erro do pedido"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"C\xf3digo")),(0,o.kt)("th",{parentName:"tr",align:null},"C\xf3digo para produto"),(0,o.kt)("th",{parentName:"tr",align:null},"Coment\xe1rio"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.customer-invalid"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"Quando h\xe1 alguma inconsist\xeancia na informa\xe7\xe3o do cliente entre a Pede Pronto e o PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.item-invalid-value"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"Quando h\xe1 alguma inconsist\xeancia no valor do pedido entre a Pede Pronto e o PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.order-invalid"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"Quando h\xe1 alguma inconsist\xeancia no formato do pedido entre a Pede Pronto e o PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.payment-invalid"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"Quando h\xe1 alguma inconsist\xeancia no pagamento entre a Pede Pronto e o PDV")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.product-missing"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"Quando est\xe1 faltando um produto obrigat\xf3rio para o pedido em quest\xe3o")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.invalid-data"),(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.item-inconsistent"),(0,o.kt)("td",{parentName:"tr",align:null})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.invalid-data"),(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.item-quantity-min"),(0,o.kt)("td",{parentName:"tr",align:null},"Quando a quantidade  de um determinado produto ou subproduto for inferior ao m\xednimo")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.invalid-data"),(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.item-subproduct-unexisting"),(0,o.kt)("td",{parentName:"tr",align:null},"Quando o subproduto n\xe3o pode ser pedido para um produto porque n\xe3o existe para a loja ou n\xe3o \xe9 filho do suposto produto pai")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.invalid-data"),(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.item-unavailable-time"),(0,o.kt)("td",{parentName:"tr",align:null},"Quando o produto n\xe3o pode ser pedido devido \xe0s restri\xe7\xf5es de tempo")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.invalid-data"),(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.item-unavailable"),(0,o.kt)("td",{parentName:"tr",align:null},"Quando o produto n\xe3o pode ser pedido porque est\xe1 fora de estoque")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.invalid-data"),(0,o.kt)("td",{parentName:"tr",align:null},"onyo.order.item-unexisting"),(0,o.kt)("td",{parentName:"tr",align:null},"Quando o produto informado n\xe3o existe no PDV")))))}m.isMDXComponent=!0}}]);