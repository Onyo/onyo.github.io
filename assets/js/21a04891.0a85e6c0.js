"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[114],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return c}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var u=n.createContext({}),p=function(e){var t=n.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(u.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},s=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),s=p(a),c=r,k=s["".concat(u,".").concat(c)]||s[c]||m[c]||o;return a?n.createElement(k,i(i({ref:t},d),{},{components:a})):n.createElement(k,i({ref:t},d))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=s;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}s.displayName="MDXCreateElement"},9722:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return p},toc:function(){return d},default:function(){return s}});var n=a(2122),r=a(9756),o=(a(7294),a(3905)),i=["components"],l={id:"webview-integration",title:"Integra\xe7\xe3o de identidade WebView",hide_title:!0},u="Fluxo de login",p={unversionedId:"checkout/guides/webview-integration",id:"checkout/guides/webview-integration",isDocsHomePage:!1,title:"Integra\xe7\xe3o de identidade WebView",description:"Sobre este guia",source:"@site/docs/checkout/guides/webview-integration.md",sourceDirName:"checkout/guides",slug:"/checkout/guides/webview-integration",permalink:"/checkout/guides/webview-integration",editUrl:"https://onyo.github.io/docs/checkout/guides/webview-integration.md",version:"current",frontMatter:{id:"webview-integration",title:"Integra\xe7\xe3o de identidade WebView",hide_title:!0},sidebar:"docs",previous:{title:"Vis\xe3o geral",permalink:"/"},next:{title:"Autentica\xe7\xe3o para Rede",permalink:"/checkout/batch/auth-batch"}},d=[{value:"Sobre este guia",id:"sobre-este-guia",children:[]},{value:"Como funciona?",id:"como-funciona",children:[{value:"Fluxo",id:"fluxo",children:[]}]},{value:"Endpoint de Autentica\xe7\xe3o:",id:"endpoint-de-autentica\xe7\xe3o",children:[{value:"Exemplo chamada de autentica\xe7\xe3o (curl):",id:"exemplo-chamada-de-autentica\xe7\xe3o-curl",children:[]},{value:"Retornos da chamada de autentica\xe7\xe3o:",id:"retornos-da-chamada-de-autentica\xe7\xe3o",children:[]}]},{value:"Diagrama de Sequ\xeancia",id:"diagrama-de-sequ\xeancia",children:[]},{value:"Obtendo ajuda",id:"obtendo-ajuda",children:[]}],m={toc:d};function s(e){var t=e.components,l=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"fluxo-de-login"},"Fluxo de login"),(0,o.kt)("h2",{id:"sobre-este-guia"},"Sobre este guia"),(0,o.kt)("p",null,"Neste guia vamos descrever o passo-a-passo para integra\xe7\xe3o de uma WebView com sua plataforma. Para tal, \xe9\nnecess\xe1rio seguir um fluxo que visa proteger ambas as partes de agentes maliciosos.."),(0,o.kt)("h2",{id:"como-funciona"},"Como funciona?"),(0,o.kt)("p",null,"A imagem a seguir descreve o fluxo que deve ser seguido para que o login seja feito de\nforma bem sucedida."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"img",src:a(2034).Z})),(0,o.kt)("h3",{id:"fluxo"},"Fluxo"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Passo 1"),": A aplica\xe7\xe3o mobile faz uma requisi\xe7\xe3o HTTPS para uma API que est\xe1 credenciada e\ntem acesso \xe0 plataforma do Pede Pronto;"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Passo 2:")," Essa API, de posse de uma api key previamente fornecida pelo Pede Pronto, efetua\numa requisi\xe7\xe3o com os dados do usu\xe1rio como payload e a api key no cabe\xe7alho da\nrequisi\xe7\xe3o;"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Passo 3:")," Caso a requisi\xe7\xe3o seja bem sucedida, a plataforma do Pede Pronto retorna uma\nresposta contendo um token de acesso para o usu\xe1rio em quest\xe3o;"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Passo 4:")," A API repassa esse token para o dispositivo mobile;"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Passo 5:")," A aplica\xe7\xe3o mobile abre uma WebView passando o token de acesso como par\xe2metro\nde querystring."),(0,o.kt)("h2",{id:"endpoint-de-autentica\xe7\xe3o"},"Endpoint de Autentica\xe7\xe3o:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"URL: /v1/partners/login"),(0,o.kt)("li",{parentName:"ul"},"M\xe9todo: POST"),(0,o.kt)("li",{parentName:"ul"},"Headers:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Content-Type: application/json"),(0,o.kt)("li",{parentName:"ul"},"Authorization: Bearer ",(0,o.kt)("strong",{parentName:"li"},"API key fornecido pelo Pede Pronto")))),(0,o.kt)("li",{parentName:"ul"},"Payload (formato JSON):")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"campo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"tipo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"required?")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"exemplo")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"email"),(0,o.kt)("td",{parentName:"tr",align:null},"String"),(0,o.kt)("td",{parentName:"tr",align:null},"S"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"mailto:teste@email.com.br"},"teste@email.com.br"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"phone"),(0,o.kt)("td",{parentName:"tr",align:null},"String (DDD e n\xba)"),(0,o.kt)("td",{parentName:"tr",align:null},"S"),(0,o.kt)("td",{parentName:"tr",align:null},"71984544554")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"cpf"),(0,o.kt)("td",{parentName:"tr",align:null},"String (somente n\xba)"),(0,o.kt)("td",{parentName:"tr",align:null},"S"),(0,o.kt)("td",{parentName:"tr",align:null},"7887878766")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"name"),(0,o.kt)("td",{parentName:"tr",align:null},"String"),(0,o.kt)("td",{parentName:"tr",align:null},"S"),(0,o.kt)("td",{parentName:"tr",align:null},"Washington Silva")))),(0,o.kt)("h3",{id:"exemplo-chamada-de-autentica\xe7\xe3o-curl"},"Exemplo chamada de autentica\xe7\xe3o (curl):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'curl --request POST \\\n--url https://api.staging.onyo.com/v1/partners/login \\\n--header \'authorization: Bearer\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6Ikpva\nG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_ad\nQssw5c\' \\\n--header \'content-type: application/json\' \\\n--data \'{\n"email": "teste@email.com",\n"phone": "11985412354",\n"cpf": "91078236062",\n\u201cname\u201d: \u201cJo\xe3o Silva\u201d\n}\'\n')),(0,o.kt)("h3",{id:"retornos-da-chamada-de-autentica\xe7\xe3o"},"Retornos da chamada de autentica\xe7\xe3o:"),(0,o.kt)("h4",{id:"sucesso"},"Sucesso"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Opera\xe7\xe3o realizada com sucesso:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"C\xf3digo 200 ou 201"),(0,o.kt)("li",{parentName:"ul"},"Payload (JSON):")),(0,o.kt)("table",{parentName:"li"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"campo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"tipo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"exemplo")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"token"),(0,o.kt)("td",{parentName:"tr",align:null},"String(Token JWT)"),(0,o.kt)("td",{parentName:"tr",align:null},"ehkhukj787hhh")))),(0,o.kt)("p",{parentName:"li"},"HTTP ","[200|201]"," OK"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"{\n\u201ctoken\u201d:\n\u201ceyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaW\nF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c\u201d\n}\n")))),(0,o.kt)("h4",{id:"erro"},"Erro"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Erro:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"C\xf3digo 400"),(0,o.kt)("li",{parentName:"ul"},"Payload (JSON):")),(0,o.kt)("table",{parentName:"li"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"campo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"tipo")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"exemplo")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"error"),(0,o.kt)("td",{parentName:"tr",align:null},"String"),(0,o.kt)("td",{parentName:"tr",align:null},"onyo.user.invalid-data")))))),(0,o.kt)("p",null,"HTTP 400 BAD REQUEST"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"{\n\u201cerror\u201d: \u201conyo.user.invalid-data\u201d\n}\n")),(0,o.kt)("h2",{id:"diagrama-de-sequ\xeancia"},"Diagrama de Sequ\xeancia"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Sucesso:")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"img",src:a(2548).Z})),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Erro:")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"img",src:a(6263).Z})),(0,o.kt)("h2",{id:"obtendo-ajuda"},"Obtendo ajuda"),(0,o.kt)("p",null,"Esperamos ter ajudado com este artigo! Caso tenha restado alguma d\xfavida, voc\xea pode consultar o nosso FAQ ou entrar em contato atrav\xe9s do e-mail: @pedepronto.com.br"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"")))}s.isMDXComponent=!0},6263:function(e,t,a){t.Z=a.p+"assets/images/webview-integration-error-e879ba9563ca640aee362f25b8e817ae.png"},2034:function(e,t,a){t.Z=a.p+"assets/images/webview-integration-flow-513815def98ffd423089b865512c9ca7.png"},2548:function(e,t,a){t.Z=a.p+"assets/images/webview-integration-success-02d14b5651d9c059b1a0c6751dc9824a.png"}}]);